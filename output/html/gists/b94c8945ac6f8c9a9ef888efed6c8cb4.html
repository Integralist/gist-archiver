<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<title>[Terraform Modules] #terraform #tf #modules</title>
<link rel="stylesheet" type="text/css" href="../../assets/css/styles.css">
</head>
<body>
<div class="container">
<a href="../index.html" class="back-link">&laquo; Back to Index</a>
<h1 id="terraform-modules-terraform-tf-modules">[Terraform Modules] #terraform #tf #modules</h1>

<h2 id="terraform-modules-md">Terraform Modules.md</h2>

<pre><code class="language-markdown">To use modules they must abide by the following directory structure:

</code></pre>

<p>.
├── modules
│   └── your_module_name_here
│       └── whatever_you_want_to_call_this.tf
│       └── outputs.tf
├── outputs.tf
├── service.tf</p>

<pre><code>
&gt; NOTE: multiple `outputs.tf` files. We'll demonstrate below how to reference a module's output variable from within our 'root' module (i.e. `service.tf`) .

You would then consume the module from within your root module like so:

```tf
module &quot;foo&quot; {
  source = &quot;./modules/your_module_name_here&quot;
  some_input_variable = &quot;example&quot;
}
</code></pre>

<p>The module itself would look like so:</p>

<pre><code class="language-tf">// providers must be set in every module (not just the root module)
terraform {
  required_providers {
    fastly = {
      source  = &quot;fastly/fastly&quot;
      version = &quot;0.25.0&quot;
    }
  }
}

variable &quot;some_input_variable&quot; {
  type        = string
  description = &quot;Some sort of value&quot;
}

resource &quot;fastly_service_v1&quot; &quot;test_service&quot; {
  name = &quot;testing_tf_modules&quot;
  domain {
    name = &quot;tfmodules-${var.some_input_variable}.integralist-test.com&quot;
  }
  backend {
    address = &quot;httpbin.org&quot;
    name    = &quot;httpbin&quot;
  }
  force_destroy = true
}
</code></pre>

<p>The module&rsquo;s <code>outputs.tf</code> would look like:</p>

<pre><code class="language-tf">output &quot;active&quot; {
  value = fastly_service_v1.test_service_foo.active_version
}
</code></pre>

<p>While the root module&rsquo;s <code>outputs.tf</code> would look like:</p>

<pre><code class="language-tf">output &quot;active&quot; {
  value = fastly_service_v1.test_service.active_version
}

output &quot;active_foo&quot; {
  value = module.foo.active
}
</code></pre>

<p>Notice the syntax to reference the module&rsquo;s output variable from within the root module: <code>module.&lt;module_name&gt;.&lt;module_output_variable_name&gt;</code>.
&ldquo;`</p>

</div>
</body>
</html>
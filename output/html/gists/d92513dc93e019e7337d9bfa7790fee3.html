<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<title>[Golang Map to Struct] #go #golang #map #struct #convert #mapstructure</title>
<link rel="stylesheet" type="text/css" href="../../assets/css/styles.css">
</head>
<body>
<div class="container">
<a href="../index.html" class="back-link">&laquo; Back to Index</a>
<h1 id="golang-map-to-struct-go-golang-map-struct-convert-mapstructure">[Golang Map to Struct] #go #golang #map #struct #convert #mapstructure</h1>

<h2 id="golang-map-to-struct-md">Golang Map to Struct.md</h2>

<pre><code class="language-markdown">Going from a map (such as `map[string]interface`) to a struct is possible, but you need to run through the following steps:

- `json.Marshal(&lt;map&gt;)` into json (returns: `[]byte`)
- `json.Unmarshal(&lt;jsonByteSlice&gt;, &lt;pointerToStruct&gt;)`

&gt; Note: an example of why you would do this is when getting a JSON API response (in that scenario you'd also have to first `json.Unmarshal` the JSON data into a map, so that's yet _another_ step!)

It would be nice if the steps could just be:

- Decode `map[string]interface` to `&lt;pointerToStruct&gt;`.

This is where the `mitchellh/mapstructure` package comes in. It utilizes reflection to support this behaviour.

```go
package main

import (
	&quot;fmt&quot;

	&quot;github.com/mitchellh/mapstructure&quot;
)

type Data struct {
	Foo int
	Bar string
	Baz bool `mapstructure:&quot;beep&quot;` // demonstrates how to translate a map key to a different struct field
}

func main() {
	m := map[string]interface{}{
		&quot;foo&quot;:  5,
		&quot;bar&quot;:  &quot;nice&quot;,
		&quot;beep&quot;: true, // this will be stored in a field called 'Baz'
	}
	fmt.Printf(&quot;%+v\n&quot;, m) // map[bar:nice boolean:true foo:5]

	var result Data
	mapstructure.Decode(m, &amp;result)
	fmt.Printf(&quot;%+v\n&quot;, result) // {Foo:5 Bar:nice Baz:true}
}
</code></pre>

<p>&rdquo;`</p>

</div>
</body>
</html>
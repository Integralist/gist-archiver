<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<title>git reset --soft/--mixed/--hard</title>
<style>
body { font-family: sans-serif; margin: 20px; line-height: 1.6; background-color: #f4f4f4; color: #333; }
.container { max-width: 800px; margin: auto; background: #fff; padding: 20px; border-radius: 8px; box-shadow: 0 0 10px rgba(0,0,0,0.1); }
pre { background: #f0f0f0; padding: 1em; border-radius: 5px; overflow-x: auto; border: 1px solid #ddd; }
code { font-family: 'SFMono-Regular', Consolas, 'Liberation Mono', Menlo, Courier, monospace; font-size: 0.9em;}
h1, h2 { border-bottom: 1px solid #eee; padding-bottom: 0.3em;}
a.back-link { display: inline-block; margin-bottom: 20px; color: #007bff; text-decoration: none; }
a.back-link:hover { text-decoration: underline; }
</style>
</head>
<body>
<div class="container">
<a href="../index.html" class="back-link">&laquo; Back to Index</a>
<h1 id="git-reset-soft-mixed-hard">git reset &ndash;soft/&ndash;mixed/&ndash;hard</h1>

<h2 id="git-reset-explained-md">git reset explained.md</h2>

<pre><code class="language-markdown">## UPDATE

Every time I accidentally `git commit --amend` instead of a normal git commit I have to google `git reset --soft HEAD@{1}` to save the day.

---

Imagine you have a file called `foo.txt` and your Git history looked like this: 

</code></pre>

<p>A -&gt; B -&gt; C (HEAD)</p>

<pre><code>
Let's see each commit we made:

</code></pre>

<p>A == foo
B == FOO
C == Foo</p>

<pre><code>
The following examples explain the different reset flags:

</code></pre>

<p>git reset &ndash;soft B  == move HEAD to B but keep C&rsquo;s changes staged (i.e. added to the index)</p>

<p>git reset &ndash;mixed B == move HEAD to B but keep C&rsquo;s changes unstaged (&ndash;mixed is the DEFAULT)</p>

<p>git reset &ndash;hard B  == move HEAD to B but completely delete C (you&rsquo;ve lost those changes forever)</p>

<pre><code>
&gt; **NOTE**: If you accidentally `git commit --amend` the `HEAD`, then you can undo that using `git reset --soft HEAD@{1}`. The `--soft` means the changes you made are kept staged (ready for an actual `git commit`) while the `HEAD@{1}` means set `HEAD` to what it was before the accidental `--amend`. This means `HEAD@{1}` is _NOT_ the same thing as `HEAD~1`, which gives you the commit that is the parent node of the commit that `HEAD` is currently pointing to. The reference `HEAD@{1}` is actually able to get back what we want because what it references is actually sourced from `git reflog`, which if you run `git reflog` you'll see the output shows an index for each recorded change.

If you want to clean up a PRs commits, then run:

</code></pre>

<p>git reset origin/main</p>

<pre><code>
Then your changes will still exist, but will just be unstaged (as --mixed is the default behaviour). You can now `git add --patch` cleanly.
</code></pre>

</div>
</body>
</html>
<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<title>[r.Host vs r.URL.Host] #go #golang #host #net #http</title>
<link rel="stylesheet" type="text/css" href="../../assets/css/styles.css">
</head>
<body>
<div class="container">
<a href="../index.html" class="back-link">&laquo; Back to Index</a>
<h1 id="r-host-vs-r-url-host-go-golang-host-net-http">[r.Host vs r.URL.Host] #go #golang #host #net #http</h1>

<h2 id="r-host-vs-r-url-host-md">r.Host vs r.URL.Host.md</h2>

<pre><code class="language-markdown">For clarity on `r.Host` vs `r.URL.Host` see:  
https://stackoverflow.com/a/42926149/14849316

But in summary:

</code></pre>

<p>GET <a href="https://www.google.com/?q=xxx" target="_blank">https://www.google.com/?q=xxx</a> HTTP/1.1
Host: <a href="http://gg.proxy.com/" target="_blank">gg.proxy.com</a></p>

<pre><code>
Will set `r.URL.Host` to [`www.google.com`](http://www.google.com/) and `Host` to [`gg.proxy.com`](http://gg.proxy.com/).  

While for `GET /?q=xxx HTTP/1.1` the `r.URL.Host` will be empty.

## UPDATE go 1.17

</code></pre>

<p>// RFC 7230, section 5.3: Must treat
//      GET /index.html HTTP/1.1
//      Host: www.google.com
// and
//      GET <a href="http://www.google.com/index.html" target="_blank">http://www.google.com/index.html</a> HTTP/1.1
//      Host: doesntmatter
// the same. In the second case, any Host line is ignored.
req.Host = req.URL.Host</p>

<pre><code></code></pre>

</div>
</body>
</html>
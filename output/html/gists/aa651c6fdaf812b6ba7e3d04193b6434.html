<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<title>[Go defer with os.Exit(N)] #go #golang #defer #exit</title>
<style>
body { font-family: sans-serif; margin: 20px; line-height: 1.6; background-color: #f4f4f4; color: #333; }
.container { max-width: 800px; margin: auto; background: #fff; padding: 20px; border-radius: 8px; box-shadow: 0 0 10px rgba(0,0,0,0.1); }
pre { background: #f0f0f0; padding: 1em; border-radius: 5px; overflow-x: auto; border: 1px solid #ddd; }
code { font-family: 'SFMono-Regular', Consolas, 'Liberation Mono', Menlo, Courier, monospace; font-size: 0.9em;}
h1, h2 { border-bottom: 1px solid #eee; padding-bottom: 0.3em;}
a.back-link { display: inline-block; margin-bottom: 20px; color: #007bff; text-decoration: none; }
a.back-link:hover { text-decoration: underline; }
</style>
</head>
<body>
<div class="container">
<a href="../index.html" class="back-link">&laquo; Back to Index</a>
<h1 id="go-defer-with-os-exit-n-go-golang-defer-exit">[Go defer with os.Exit(N)] #go #golang #defer #exit</h1>

<h2 id="go-defer-with-os-exit-n-go">Go defer with os.Exit(N).go</h2>

<pre><code class="language-go">package main

import (
	&quot;fmt&quot;
	&quot;os&quot;
	&quot;runtime&quot;
)

/*
Goexit terminates the goroutine that calls it. No other goroutine is affected. Goexit runs all deferred calls before terminating the goroutine. Because Goexit is not a panic, any recover calls in those deferred functions will return nil.

Calling Goexit from the main goroutine terminates that goroutine without func main returning. Since func main has not returned, the program continues execution of other goroutines. If all other goroutines exit, the program crashes.

https://golang.org/pkg/runtime/#Goexit
*/

func main() {
	defer os.Exit(0)
	fmt.Println(&quot;Hello, playground&quot;)
	defer fmt.Println(&quot;end&quot;)
	runtime.Goexit() // instead of os.Exit(1)
}

</code></pre>

</div>
</body>
</html>
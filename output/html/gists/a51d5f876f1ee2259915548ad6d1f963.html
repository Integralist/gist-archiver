<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<title>[Set same cookie on multiple domains] #cookie #multiple #domains</title>
<link rel="stylesheet" type="text/css" href="../../assets/css/styles.css">
</head>
<body>
<div class="container">
<a href="../index.html" class="back-link">&laquo; Back to Index</a>
<h1 id="set-same-cookie-on-multiple-domains-cookie-multiple-domains">[Set same cookie on multiple domains] #cookie #multiple #domains</h1>

<h2 id="set-same-cookie-on-multiple-domains-md">Set same cookie on multiple domains.md</h2>

<pre><code class="language-markdown">Reference: http://subinsb.com/set-same-cookie-on-different-domains/

The way Google does this is by creating a server-side script that sets the cookie on all the domains. 

On the domain where the login occurs, create a intermediary page that would load the server-side script that sets a cookie on the other two domains. 

i.e. the user authenticates, and are redirected to `/processing`

In that page you would add an `onload` callback onto the `body` tag. 

The document will only load when the images have completely loaded (i.e. the cookies are set on the other two domains). 

</code></pre>

<!-- https://www.domain1.com/processing -->

<p><html>
 <head>
  <script>
   function loadComplete(){</p>

<pre><code>window.location=&quot;https://www.domain1.com/user/settings&quot;; // page to redirect user once they're authenticated
</code></pre>

<p>}
   </script>
 </head>
 <body onload="loadComplete()">
 	Please wait&hellip;&hellip;&hellip;.
 	<img src="https://www.domain2.com/setcookie.php?user=jwt"/>
 	<img src="https://www.domain3.com/setcookie.php?user=jwt"/>
 </body>
</html></p>

<pre><code></code></pre>

</div>
</body>
</html>
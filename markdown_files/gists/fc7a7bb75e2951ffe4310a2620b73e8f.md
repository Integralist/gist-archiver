# Go HTTP handler Write error after WriteHeader

## example.go

```go
func exampleHandler(w http.ResponseWriter, r *http.Request) {
	defer func() {
		if rec := recover(); rec != nil {
			// The net/http server itself has a recovery mechanism that specifically looks for http.ErrAbortHandler. 
			// When it catches this particular panic, it knows to abort the current request handler and close the connection.
			if rec == http.ErrAbortHandler {
				log.Println("Handler aborted with http.ErrAbortHandler. Connection will be closed by server.")
			} else {
				log.Printf("Unhandled panic: %v.", rec)
				// We re-raise the panic so that the net/http server's default panic handler can take over.
				panic(rec)
			}
		}
	}()

    w.WriteHeader(http.StatusOK)

    _, err := w.Write([]byte("This is a successful response.\n"))
    if err != nil {
        log.Printf("Error writing successful response body: %v. Panicking with ErrAbortHandler.", err)
        // The client has already received the 200 OK header but will get an incomplete body.
        panic(http.ErrAbortHandler)
    }
    log.Println("Successfully wrote response body.")
}
```


<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<title>[Set same cookie on multiple domains] </title>
<meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" type="text/css" href="../assets/css/styles.css">
</head>
<body>
<div class="container">
<a href="../index.html" class="back-link">&laquo; Back to Index</a>
<h1 id="set-same-cookie-on-multiple-domains">[Set same cookie on multiple domains]</h1>

<p><a href="https://gist.github.com/Integralist/a51d5f876f1ee2259915548ad6d1f963" target="_blank">View original Gist on GitHub</a></p>

<p><strong>Tags:</strong> #cookie #multiple #domains</p>

<h2 id="set-same-cookie-on-multiple-domains-md">Set same cookie on multiple domains.md</h2>

<p>Reference: <a href="http://subinsb.com/set-same-cookie-on-different-domains/" target="_blank">http://subinsb.com/set-same-cookie-on-different-domains/</a></p>

<p>The way Google does this is by creating a server-side script that sets the cookie on all the domains.</p>

<p>On the domain where the login occurs, create a intermediary page that would load the server-side script that sets a cookie on the other two domains.</p>

<p>i.e. the user authenticates, and are redirected to <code>/processing</code></p>

<p>In that page you would add an <code>onload</code> callback onto the <code>body</code> tag.</p>

<p>The document will only load when the images have completely loaded (i.e. the cookies are set on the other two domains).</p>

<pre><code>&lt;!-- https://www.domain1.com/processing --&gt;

&lt;html&gt;
 &lt;head&gt;
  &lt;script&gt;
   function loadComplete(){
    window.location=&quot;https://www.domain1.com/user/settings&quot;; // page to redirect user once they're authenticated
   }
   &lt;/script&gt;
 &lt;/head&gt;
 &lt;body onload=&quot;loadComplete()&quot;&gt;
 	Please wait..........
 	&lt;img src=&quot;https://www.domain2.com/setcookie.php?user=jwt&quot;/&gt;
 	&lt;img src=&quot;https://www.domain3.com/setcookie.php?user=jwt&quot;/&gt;
 &lt;/body&gt;
&lt;/html&gt;
</code></pre>
<link rel="stylesheet" href="../assets/css/highlights/github.min.css">
<script src="../assets/js/highlight.min.js"></script>
<script>hljs.highlightAll();</script>

</div>
</body>
</html>
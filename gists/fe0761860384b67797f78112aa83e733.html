<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<title>[r.Host vs r.URL.Host] #go #golang #host #net #http</title>
<link rel="stylesheet" type="text/css" href="../assets/css/styles.css">
</head>
<body>
<div class="container">
<a href="../index.html" class="back-link">&laquo; Back to Index</a>
<h1 id="r-host-vs-r-url-host-go-golang-host-net-http">[r.Host vs r.URL.Host] #go #golang #host #net #http</h1>

<p><a href="https://gist.github.com/Integralist/fe0761860384b67797f78112aa83e733" target="_blank">View original Gist on GitHub</a></p>

<h2 id="r-host-vs-r-url-host-md">r.Host vs r.URL.Host.md</h2>

<p>For clarity on <code>r.Host</code> vs <code>r.URL.Host</code> see:<br />
<a href="https://stackoverflow.com/a/42926149/14849316" target="_blank">https://stackoverflow.com/a/42926149/14849316</a></p>

<p>But in summary:</p>

<pre><code>GET https://www.google.com/?q=xxx HTTP/1.1
Host: [gg.proxy.com](http://gg.proxy.com/)
</code></pre>

<p>Will set <code>r.URL.Host</code> to <a href="http://www.google.com/" target="_blank"><code>www.google.com</code></a> and <code>Host</code> to <a href="http://gg.proxy.com/" target="_blank"><code>gg.proxy.com</code></a>.</p>

<p>While for <code>GET /?q=xxx HTTP/1.1</code> the <code>r.URL.Host</code> will be empty.</p>

<h2 id="update-go-1-17">UPDATE go 1.17</h2>

<pre><code>// RFC 7230, section 5.3: Must treat
//      GET /index.html HTTP/1.1
//      Host: www.google.com
// and
//      GET http://www.google.com/index.html HTTP/1.1
//      Host: doesntmatter
// the same. In the second case, any Host line is ignored.
req.Host = req.URL.Host
</code></pre>

</div>
</body>
</html>
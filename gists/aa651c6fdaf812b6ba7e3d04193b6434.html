<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<title>Go: defer with os.Exit(N) </title>
<meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" type="text/css" href="../assets/css/styles.css">
</head>
<body>
<div class="container">
<a href="../index.html" class="back-link">&laquo; Back to Index</a>
<div class="markdown-content">
<h1 id="go-defer-with-os-exit-n">Go: defer with os.Exit(N)</h1>

<p><a href="https://gist.github.com/Integralist/aa651c6fdaf812b6ba7e3d04193b6434" target="_blank">View original Gist on GitHub</a></p>

<p><strong>Tags:</strong> #go</p>

<h2 id="go-defer-with-os-exit-n-go">Go defer with os.Exit(N).go</h2>

<pre><code class="language-go">package main

import (
	&quot;fmt&quot;
	&quot;os&quot;
	&quot;runtime&quot;
)

/*
Goexit terminates the goroutine that calls it. No other goroutine is affected. Goexit runs all deferred calls before terminating the goroutine. Because Goexit is not a panic, any recover calls in those deferred functions will return nil.

Calling Goexit from the main goroutine terminates that goroutine without func main returning. Since func main has not returned, the program continues execution of other goroutines. If all other goroutines exit, the program crashes.

https://golang.org/pkg/runtime/#Goexit
*/

func main() {
	defer os.Exit(0)
	fmt.Println(&quot;Hello, playground&quot;)
	defer fmt.Println(&quot;end&quot;)
	runtime.Goexit() // instead of os.Exit(1)
}

</code></pre>
</div>
<link rel="stylesheet" href="../assets/css/highlights/github.min.css">
<script src="../assets/js/highlight.min.js"></script>
<script src="../assets/js/notes.js" defer></script>
<script>hljs.highlightAll();</script>

</div>
</body>
</html>
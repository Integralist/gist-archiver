<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<title>I'm trying to get the cleanest, most basic export from r.js</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" type="text/css" href="../assets/css/styles.css">
</head>
<body>
<div class="container">
<a href="../index.html" class="back-link">&laquo; Back to Index</a>
<div class="markdown-content">
<h1 id="i-m-trying-to-get-the-cleanest-most-basic-export-from-r-js">I&rsquo;m trying to get the cleanest, most basic export from r.js</h1>

<p><a href="https://gist.github.com/Integralist/4642970" target="_blank">View original Gist on GitHub</a></p>

<h2 id="requirejs-md">RequireJS.md</h2>

<p>Directory structure&hellip;</p>

<ul>
<li>app

<ul>
<li>images</li>
<li>release</li>
<li>styles

<ul>
<li>main.css</li>
</ul></li>
</ul></li>
<li>lib

<ul>
<li>jquery.js</li>
<li>require.js</li>
</ul></li>
<li>modules

<ul>
<li>a.js</li>
<li>b.js</li>
<li>c.js</li>
</ul></li>
</ul>

<p>Specific RequireJS settings within my Gruntfile&hellip;</p>

<pre><code class="language-js">requirejs: {
  compile: {
    options: {
      baseUrl: './app',
      mainConfigFile: './app/main.js',
      dir: './app/release/',
      fileExclusionRegExp: /^\.|node_modules|Gruntfile|\.md|package.json/,
      modules: [
        {
          name: 'main'
        }
      ]
    }
  }
}
</code></pre>

<p>Executing <code>grunt release</code> feeds back the following information&hellip;</p>

<pre><code class="language-sh">$ grunt release
Running &quot;requirejs:compile&quot; (requirejs) task
&gt;&gt; Optimizing (standard.keepLines) CSS file:
&gt;&gt; /Library/WebServer/Documents/GruntTest/2/app/release/styles/main.css
&gt;&gt; Tracing dependencies for: main
&gt;&gt; Uglifying file: /Library/WebServer/Documents/GruntTest/2/app/release/a.js
&gt;&gt; Uglifying file: /Library/WebServer/Documents/GruntTest/2/app/release/b.js
&gt;&gt; Uglifying file: /Library/WebServer/Documents/GruntTest/2/app/release/c.js
&gt;&gt; Uglifying file:
&gt;&gt; /Library/WebServer/Documents/GruntTest/2/app/release/jquery.js
&gt;&gt; Uglifying file: /Library/WebServer/Documents/GruntTest/2/app/release/main.js
&gt;&gt; styles/main.css
&gt;&gt; ----------------
&gt;&gt; styles/main.css
&gt;&gt; 
&gt;&gt; main.js
&gt;&gt; ----------------
&gt;&gt; a.js
&gt;&gt; b.js
&gt;&gt; c.js
&gt;&gt; jquery.js
&gt;&gt; main.js

Running &quot;sass:dist&quot; (sass) task

Done, without errors.
</code></pre>

<p>&hellip;after the above command is run my directory structure looks like this&hellip;</p>

<ul>
<li>app

<ul>
<li>images</li>
<li>release

<ul>
<li>images</li>
<li>styles

<ul>
<li>main.css (optimised)</li>
</ul></li>
<li>a.js</li>
<li>b.js</li>
<li>build.txt</li>
<li>c.js</li>
<li>jquery.js (optimised)</li>
<li>main.js (optimised)</li>
</ul></li>
<li>styles

<ul>
<li>main.css</li>
</ul></li>
</ul></li>
<li>lib

<ul>
<li>jquery.js</li>
<li>require.js</li>
</ul></li>
<li>modules

<ul>
<li>a.js</li>
<li>b.js</li>
<li>c.js</li>
</ul></li>
</ul>

<p>&hellip;but really I want to end up with the following directory structure instead&hellip;</p>

<ul>
<li>app

<ul>
<li>images</li>
<li>release

<ul>
<li>build.txt</li>
<li>main.js (optimised)</li>
</ul></li>
<li>styles

<ul>
<li>main.css</li>
</ul></li>
</ul></li>
<li>lib

<ul>
<li>jquery.js</li>
<li>require.js</li>
</ul></li>
<li>modules

<ul>
<li>a.js</li>
<li>b.js</li>
<li>c.js</li>
</ul></li>
</ul>
</div>
<link rel="stylesheet" href="../assets/css/highlights/github.min.css">
<script src="../assets/js/highlight.min.js"></script>
<script src="../assets/js/notes.js" defer></script>
<script>hljs.highlightAll();</script>

</div>
</body>
</html>